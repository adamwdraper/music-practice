/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("utilities/data/models/data",["underscore","backbone"],function(e,t){var n=t.Model.extend({defaults:{id:"",value:"",alias:"",addToHistory:!0,addToUrl:!0,getFromCookie:!1,isArray:!1},initialize:function(){}});return n}),define("cookies",["jquery","underscore"],function(e,t){var n={set:function(n,r,i){i=e.extend({path:"/",domain:window.location.hostname.split(".").slice(-2).join("."),expires:""},i),t.isNumber(i.expires)?i.expires=new Date((new Date).getTime()+i.expires*24*60*60*1e3):t.isString(i.expires)&&(i.expires=new Date(i.expires)),document.cookie=encodeURIComponent(n)+"="+String(r).replace(/[^!#-+\--:<-\[\]-~]/g,encodeURIComponent)+";path="+i.path+";domain="+i.domain+";expires="+i.expires.toGMTString()},get:function(e){var t=encodeURIComponent(e)+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return decodeURIComponent(i.substring(t.length,i.length))}return null},expire:function(e){this.set(e,"",{expires:-1})},isEnabled:function(){this.set("cookiesIsEnabledTest","1");var e=this.get("cookiesIsEnabledTest")==="1"?!0:!1;return this.expire("cookiesIsEnabledTest"),e}};return n}),define("data",["jquery","underscore","backbone","utilities/data/models/data","cookies"],function(e,t,n,r,i){var s=n.Collection.extend({model:r,lastChanged:"",initialize:function(){t.bindAll(this),this.on("add",function(e){e.on("change",function(){this.lastChanged=e.get("id"),this.trigger("dataChanged",e.get("id"))},this)},this)},load:function(e){var n=t.after(e.length,this.finalizeLoad);t.each(e,function(e,r){var i=this.get(e[0]);i||(i=t.find(this.models,function(t){return t.get("alias")===e[0]})),i&&i.set({value:decodeURIComponent(e[1])},{silent:!0}),n()},this)},finalizeLoad:function(e){var n=t.after(this.length,this.triggerInitialized);t.each(this.models,function(e,r){if(e.get("getFromCookie")){var s=null;e.get("alias")!==""?s=e.get("alias"):s=e.get("id"),e.set({value:i.get(s)})}if(e.get("isArray")&&t.isString(e.get("value"))){var o=e.get("value");e.set("value",o.split(","))}n()},this)},triggerInitialized:function(){this.trigger("initialized")}});return new s}),define("router",["jquery","underscore","backbone","data"],function(e,t,n,r){var i=n.Router.extend({settings:{hash:{useBang:!1,dataSeparator:"&",keyValSeparator:"="},loadFrom:"hash"},initialize:function(t){e.extend(this.settings,t),r.on("dataChanged",function(e){this.navigateHash(!r.get(e).get("addToHistory"))},this)},routes:{"*data":"appAction"},appAction:function(e){if(this.settings.loadFrom==="query"){var n=window.location.search.substr(1),i=n.split("&"),s=[];i[0]!==""&&t.each(i,function(e,t){e.indexOf("=")>-1&&s.push(e.split("="))}),r.load(s)}else if(e.length>0){var o=this;this.settings.hash.useBang&&e.charAt(0)==="!"&&(e=e.substr(1));var i=e.split(this.settings.hash.dataSeparator),s=[];t.each(i,function(e,t){s.push(e.split(o.settings.hash.keyValSeparator))}),r.load(s)}else r.trigger("initialized")},navigateHash:function(e){var n=[],i="",s;t.each(r.models,function(e,r){e.get("addToUrl")&&(s=e.get("value"),e.get("isArray")&&!t.isEmpty(s)&&(s=s.join(",")),s!==""&&(e.get("alias")!==""?n.push(e.get("alias")+this.settings.hash.keyValSeparator+encodeURIComponent(s).replace(/%2C/gi,",")):n.push(e.get("id")+this.settings.hash.keyValSeparator+encodeURIComponent(s).replace(/%2C/gi,","))))},this),this.settings.hash.useBang&&(i+="!"),i+=n.join(this.settings.hash.dataSeparator),this.navigate(i,{trigger:!1,replace:e})}}),s=function(e){var t=new i(e);n.history.start()};return{initialize:s}}),define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!apps/demo/templates/one.html",[],function(){return"One"}),define("text!apps/demo/templates/two.html",[],function(){return"Two"}),define("text!apps/demo/templates/three.html",[],function(){return"Three"}),define("apps/demo/views/view",["jquery","underscore","backbone","data","text!apps/demo/templates/one.html","text!apps/demo/templates/two.html","text!apps/demo/templates/three.html"],function(e,t,n,r,i,s,o){var u=n.View.extend({events:{},initialize:function(){r.on("dataChanged",function(e){e==="v"&&this.render()},this)},render:function(){var n;switch(r.get("v").get("value")){case"one":n=t.template(i,{});break;case"two":n=t.template(s,{});break;case"three":n=t.template(o,{})}return e(this.el).html(n),this}});return new u}),define("text!plugins/toggles/templates/toggles.html",[],function(){return"<% \nvar html = '';\n_.each(toggles, function(toggle, index) {\n    html += '<' + tagName + ' class=\"toggle ' + className;\n    if(toggle.value === active) {\n        html += ' active';\n    }\n    html += '\" data-value=\"' + toggle.value + '\">' + toggle.label + '</' + tagName + '>';\n});\n%>\n<%= html %>"}),define("plugins/toggles/plugin",["jquery","underscore","backbone","data","text!plugins/toggles/templates/toggles.html"],function(e,t,n,r,i){var s=n.View.extend({events:{"click .toggle":"onClick"},initialize:function(){r.on("dataChanged",function(e){e===this.options.data&&this.render()},this),this.options.toggles.tagName||(this.options.tagName==="ul"?this.options.toggles.tagName="li":this.options.toggles.tagName="a"),e(this.options.element).html(e(this.el))},render:function(){var n=t.template(i,{tagName:this.options.toggles.tagName,className:this.options.toggles.className,toggles:this.options.toggles.toggles,active:r.get(this.options.data).get("value")});return e(this.el).html(n),this},onClick:function(t){var n=e(t.currentTarget).attr("data-value");r.get(this.options.data).set({value:n})}});return s}),define("text!apps/demo/templates/app.html",[],function(){return'<div id="nav" class="nav"></div>\n<div id="view"></div>'}),define("apps/demo/views/app",["jquery","underscore","backbone","data","apps/demo/views/view","plugins/toggles/plugin","text!apps/demo/templates/app.html"],function(e,t,n,r,i,s,o){var u=n.View.extend({events:{},initialize:function(){r.on("initialized",this.render,this)},render:function(){var n=t.template(o,{});return e(this.el).html(n),this.tabs=(new s({element:"#nav",className:"tabs cf",data:"v",toggles:{className:"tab",toggles:[{label:"One",value:"one"},{label:"Two",value:"two"},{label:"Three",value:"three"}]}})).render(),i.setElement("#view").render(),this}});return new u}),define("apps/demo/app",["jquery","underscore","backbone","data","router","apps/demo/views/app"],function(e,t,n,r,i,s){var o={initialize:function(e){r.add([{id:"v",value:"one"}]),s.setElement(e),i.initialize()}};return o});